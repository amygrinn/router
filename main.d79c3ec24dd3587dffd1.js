!function(){"use strict";var e={};function t(){return t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},t.apply(this,arguments)}e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,{a:a}),a},e.d=function(t,a){for(var n in a)e.o(a,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:a[n]})},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var a=React,n=e.n(a),l=ReactDOM,r=e.n(l);function i(e,t){let a=String(e);if("/"===t[0])return t;for("./"===t.slice(0,2)&&(t=t.slice(2),a=a.slice(0,a.lastIndexOf("/")));".."===t.slice(0,2);)t=t.slice(3),a=a.slice(0,a.lastIndexOf("/"));return t?`${a}/${t}`:a||"/"}function c(e,t){const a=t.split(/(?=\/)/g);let n=e.pages,l="";for(let t=0;t<a.length;t++){if(!n)return e.fallback;const r=n.find((e=>e.path===a[t]));if(!r)return e.fallback;if(r.redirectTo)return i(l,r.redirectTo);const c=t===a.length-1;if(!r.children&&!c)return e.fallback;if(l+=r.path,!r.children)return l;n=r.children}return l}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const s=e=>e.replace(/['"]/g,"");class d{constructor(e){o(this,"path",void 0),o(this,"children",void 0),o(this,"redirectTo",void 0),"string"==typeof e?this.path=s(e):(this.path=s(e.path),this.redirectTo=e.redirectTo?s(e.redirectTo):void 0,e.children&&(this.children=e.children.map((e=>new d(e)))))}}class u{constructor(e){o(this,"baseUrl",void 0),o(this,"fallback",void 0),o(this,"pages",void 0),this.baseUrl=e.baseUrl?s(e.baseUrl):"",this.fallback=e.fallback?s(e.fallback):"/",this.pages=e.pages.map((e=>new d(e)))}}var m=JSON.parse('{"fallback":"/404","pages":["/",{"path":"/i","children":["/i0","/i1",{"path":"/j","children":["/j0","/j1",{"path":"/k","children":["/k0","/k1"]}]}]},"/page1","/page2",{"path":"/redirect","children":[{"path":"/absolute","redirectTo":"/i/i0"},{"path":"/relative","redirectTo":"../i/i1"}]}]}');function h(){m.baseUrl="/router";const[e,l]=function(e){const t=(0,a.useMemo)((()=>new u(e)),[e]),n=(0,a.useMemo)((()=>function(e){const t=(e,a)=>e.children?e.children.reduce(((n,l)=>(n.push(a+e.path),n.push(...t(l,a+e.path)),n)),[]):[a+e.path];return e.pages.reduce(((e,a)=>(e.push(...t(a,"")),e)),[])}(t)),[e]),[l,r]=(0,a.useState)(n[0]),o={"data-route-state":l},s=()=>{const e=window.location.pathname.replace(t.baseUrl,""),a=c(t,e);a!==t.fallback&&t.baseUrl+a!==window.location.pathname&&history.pushState(null,a,t.baseUrl+a),r(a)};var d,m,h;return d=window,m="popstate",h=s,(0,a.useEffect)((()=>(d.addEventListener(m,h),()=>d.removeEventListener(m,h))),[d,m,h]),(0,a.useMemo)(s,[]),[o,e=>()=>{".."===e.slice(0,2)&&(e=`../${e}`);const a=c(t,i(l,e));history.pushState(null,a,t.baseUrl+a),r(a)},l]}(m);return n().createElement("div",null,n().createElement("div",{className:"flex-col"},n().createElement("h1",null,"Tay Router Example"),n().createElement("nav",null,n().createElement("div",null,n().createElement("button",{onClick:l("/")},"Home (/)"),n().createElement("button",{onClick:l("/page1")},"Page 1 (/page1)"),n().createElement("button",{onClick:l("/page2")},"Page 2 (/page2)"),n().createElement("button",{onClick:l("/i/i0")},"Child 1 (/i/i0)"),n().createElement("button",{onClick:l("/i/i1")},"Child 2 (/i/i1)"),n().createElement("button",{onClick:l("/i/j/j0")},"G-Child 1 (/i/j/j0)"),n().createElement("button",{onClick:l("/i/j/j1")},"G-Child 2 (/i/j/j1)"),n().createElement("button",{onClick:l("/i/j/k/k0")},"G-G-Child 1 (/i/j/k/k0)"),n().createElement("button",{onClick:l("/i/j/k/k1")},"G-G-Child 2 (/i/j/k/k1)"),n().createElement("button",{onClick:l("/non-existing-page")},"Fallback (/non-existing/page)"),n().createElement("button",{onClick:l("/redirect/absolute")},"Absolute Redirect (/redirect/absolute)"),n().createElement("button",{onClick:l("/redirect/relative")},"Relative Redirect (/redirect/relative)"))),n().createElement("div",t({className:"router"},e),n().createElement("div",{className:"flex-wrap info-box max-width-md"},n().createElement("h3",null,"Router"),n().createElement("span",{"data-route":"/404"},"Fallback page (/404)"),n().createElement("span",{"data-route":"/"},"Home page (/)"),n().createElement("span",{"data-route":"/page1"},"Page 1 (/page1)"),n().createElement("span",{"data-route":"/page2"},"Page 2 (/page2)"),n().createElement("span",{"data-route":"/i/i0"},"Child 1 (/i/i0)"),n().createElement("span",{"data-route":"/i/i1"},"Child 2 (/i/i1)"),n().createElement("span",{"data-route":"/i/j/j0"},"G-Child 1 (/i/j/j0)"),n().createElement("span",{"data-route":"/i/j/j1"},"G-Child 2 (/i/j/j1)"),n().createElement("span",{"data-route":"/i/j/k/k0"},"G-G-Child 1 (/i/j/k/k0)"),n().createElement("span",{"data-route":"/i/j/k/k1"},"G-G-Child 2 (/i/j/k/k1)")),n().createElement("div",{className:"info-box max-width-md flex-col"},n().createElement("h4",null,'"Starts with" syntax '),n().createElement("p",null,"Display an element on all child paths"),n().createElement("span",{"data-route":"^/i"},"Any Child (^/i)"),n().createElement("span",{"data-route":"^/i/j"},"Any G-Child (^/i/j)")),n().createElement("div",{className:"info-box flex-wrap"},n().createElement("div",{className:"max-width-md"},n().createElement("h3",null,"Partial syntax"),n().createElement("p",null,"Specify routes relative to the nearest parent element with a 'data-route' attribute. The most top level parent must use the \"starts with\" syntax.")),n().createElement("div",{className:"flex-wrap info-box","data-route":"^/i"},n().createElement("button",{className:"hide",onClick:l("./")},"Go up (./)"),n().createElement("h4",null,"^/i"),n().createElement("div",{className:"flex-col max-width-md"},n().createElement("span",{"data-route":"i1"},"Child 2 (i1)"),n().createElement("span",{"data-route":"j/j0"},"G-Child 1 (j/j0)"),n().createElement("span",{"data-route":"j/j1"},"G-Child 2 (j/j1)"),n().createElement("div",{className:"flex-wrap"},n().createElement("span",{"data-route":"j/k/k0"},"G-G-Child 1 (j/k/k0)"),n().createElement("span",{"data-route":"j/k/k1"},"G-G-Child 2 (j/k/k1)"))),n().createElement("div",{className:"info-box max-width-md flex-wrap","data-route":"^j"},n().createElement("h4",null,"^j"),n().createElement("span",{"data-route":"j0"},"G-Child 1 (j0)"),n().createElement("span",{"data-route":"j1"},"G-Child 2 (j1)"),n().createElement("span",{"data-route":"!j0"},"Not G-Child 1 (!j0)"),n().createElement("button",{className:"hide","data-route":"j0 j1",onClick:l("./k/k0")},"Relative button (./k/k0)"),n().createElement("div",{className:"info-box flex-wrap","data-route":"^k"},n().createElement("h4",null,"^k"),n().createElement("span",{"data-route":"k0"},"G-G-Child 1 (k0)"),n().createElement("span",{"data-route":"k1"},"G-G-Child 2 (k1)"),n().createElement("button",{className:"hide","data-route":"k0 k1",onClick:l("../j0")},"Relative button (../j0)"))))),n().createElement("div",{className:"info-box max-width-md flex-col"},n().createElement("h3",null,"Exclusionary syntax"),n().createElement("span",{"data-route":"!/page1"},"Everywhere except Page 1"),n().createElement("span",{"data-route":"!/page2 !/i/i1"},"Everywhere except Page 2 or Child 2")),n().createElement("div",{className:"info-box max-width-md flex-col"},n().createElement("h4",null,"Target specific routes for styling"),n().createElement("span",{className:"red","data-route":"/i/i0"},"I'm red when inactive! (/i/i0)"),n().createElement("span",{className:"blue"},"I'm blue on Page 2")))))}r().hydrate(n().createElement(h,null),document.getElementById("app"))}();
//# sourceMappingURL=main.d79c3ec24dd3587dffd1.js.map